程序员或多或少会遇到一些无厘头的问题，比如有些注释不能删掉，删了会出某种问题。类似这样，这次特意记下前几天遇到的一个问题。

问题是这样：前端js写好一个方法（称之为方法A）向nodejs服务端发起一个ajax请求，在pc浏览器上这样没问题，同样在移动端的多种浏览器或微信QQ也也没问题，但只要把这个方法加入到业务逻辑中，在微信上运行这段业务代码，这个方法就只能发出option一个请求，没有发第二个真正的请求，很明显这是服务端不允许跨域。但是执行完之后，你再单独运行这个方法，这问题就一直存在了，不论你退出微信、重启手机、删除微信缓存，问题依旧存在。而除了微信，在你手机的其它浏览器运行这个方法A还是正常的。PC上运行没报错，控制台没有输出任何信息。

有一种情况可以让问题不再出现，就是把微信卸载了重装，但重装后的微信再次运行那段业务逻辑代码，问题又来了。

所以还是排错吧，这个错我通过err.toString()给alert出来，内容是Error: NetWork Error，这个不是跨域的错，但网络明显是没问题的。依据一般的程序员思维，拿错误去网上搜一下，把有可能的情况试一下，但这样做了最终还是没解决这个问题。

最后怎么办呢？那就是尽量让报错的时候，可以看控制台的信息。这里因为运行环境必须是微信真实环境，所以试了tbs studio，但腾讯出品给开发人员用的东西不怎么靠谱（最近被微信支付恶心到），运行不起来，偶尔有用一下的微信开发者工具也是不靠谱的，有时能输出控制台信息，有时不能，这会还干脆卡死了不给用。想看下微信开发者工具有没有更新版的，这货竟然没有检查更新功能，还得上官网自己找。随意的下载最新版的，把方法A单独运行了一下，奇迹发生了，在任何环境下（除了运行过业务代码的微信上），单独运行方法A都是不报错的，这里竟然报了，然后控制台上就很清楚了，原因是前端发送的请求的header上新加了一个字段，而在nodejs的服务端上没有允许头部包含这个字段，就造成了只发出option请求，没发第二个。可是问题就是这么的无厘头，axios的错误信息就显示Error: NetWork Error，你能想到是header字段问题？

写到这里，够啰嗦了，以后自己看了能明白自己在讲什么就不错了。
